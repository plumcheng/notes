###### 网络出现问题了怎么检查：

1、ping 127.0.0.1（本地主机环回地址[^1]） 检查TCP/IP协议栈是否正常。
2、ping 本地ip 检查本地主机网卡是否工作正常。
3、ping 网关地址 检查本地主机与网关的链路是否通畅。
4、ping 远程网站 检查本地主机与外网远程网站关的链路是否通畅。

[^1]: 环回地址是主机用于向自身发送通信的一个特殊地址。环回地址为同一台设备上运行的 TCP/IP 应用程序和服务之间相互通信提供了一条捷径。同一台主机上的两项服务若使用环回地址而非分配的主机地址，就可以绕开 TCP/IP 协议栈的下层。通过 ping 环回地址，还可以测试本地主机上的 TCP/IP 配置。

###### TCP/IP 有哪些层：

应用层、运输层、网际层、网络接口层

###### TCP/IP 三报文握手过程：

![img](images\1.png)

第一种回答：

假设主机A运行的是TCP客户程序，主机B运行TCP服务器程序。最初两端TCP进程都处于 CLOSED（关闭）状态。

A主动打开连接，B被动打开连接

服务端进程先创建传输控制块 TCB[^2] 然后服务器进程处于 LISTEN（收听）状态，等待客户端的请求。

客户端创建 TCB 后向服务端发送连接请求报文段进入 SYN-SENT（同步已发送）状态。这时请求报文段首部中同步位 SYN = 1 ， A初始序号 seq = x .

服务端收到请求后，如果同意连接，就向客户端发送确认，进入 SYN-RCVD （同步收到）状态。这时确认报文段 中 SYN = 1 ACK = 1 确认号 ack = x + 1; B初始序号 seq = y

客户端收到服务端的确认后，再给服务端发送确认，进入 ESTABLISHED（已建立连接）状态。 ACK = 1；ack = y + 1; seq = x + 1;

服务端收到客户端的确认后也进入 ESTABLISHED （已建立连接）



[^2]: 传输控制块TCB：存储了每一个连接中的一些重要信息，如：TCP连接表，指向发送和接收缓存的指针，指向重传队列的指针，当前的发送和接收序号



###### 三次握手有哪些状态：

最初两端TCP进程都处于 CLOSED（关闭）状态。然后客户端主动打开连接，服务端被动打开连接；服务端进程先创建传输控制块 TCB 然后服务器进程处于 LISTEN（收听）状态，等待客户端的请求。客户端创建 TCB 后向服务端发送连接请求报文段进入 SYN-SENT（同步已发送）状态。服务端收到请求后，如果同意连接就，就向客户端发送确认，进入 SYN-RCVD （同步收到）状态。客户端收到服务端的确认后，在给服务端发送确认，进入 ESTABLISHED（已建立连接）状态。服务端收到客户端的确认后就进入 ESTABLISHED （已建立连接）



###### 为什么两次不行：

###### 四次挥手过程：

###### 四次挥手有哪些状态：

已建立连接，A主动关闭进入（终止等待 1） ，B收到后进入（关闭等待）状态（这时TCP 处于半关闭状态）；A收到B的确认后进入（终止等待2）状态 B进入最后确认状态；A收到B连接释放的报文段后进入（时间等待）状态。

###### 拥塞机制：

拥塞窗口（cwnd） 慢开始门限（ssthresh） 慢开始算法、拥塞避免算法、快重传、快恢复。

先设置慢开始门限，然后使用慢开始算法：每收到一个确认报文，就将拥塞窗口值加一；当达到慢开始门限，就转为拥塞避免算法：每次经过一个传输轮次，就将拥塞窗口值加一；当出现超时，就认为网络出现拥塞（

###### HTTP/HEEPS 的区别

